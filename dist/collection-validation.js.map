{"version":3,"file":"collection-validation.js","sourceRoot":"","sources":["../src/collection-validation.ts"],"names":[],"mappings":";;AAEA,0DAAiD;AAGjD,MAAa,wBAAwB;IASjC,YAAY,SAAuB;QAE/B,mBAAK,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,cAAc,EAAE,CAAC;QAC/C,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAChC,CAAC;IAPD,IAAW,KAAK,KAAU,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAUxC,QAAQ,CAAC,UAAoB;QAEhC,IAAI,MAAM,GAAG,IAAI,KAAK,EAAO,CAAC;QAC9B,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAEtB,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC/B,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS;gBACzB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EACrB;YACI,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAlCD,4DAkCC","sourcesContent":["import { Validator } from \"./validator\";\nimport { ValidationRule } from \"./validation-rule\";\nimport { given } from \"@nivinjoseph/n-defensive\";\n\n// public\nexport class CollectionValidationRule<T> implements ValidationRule<Array<T>>\n{\n    private readonly _validator: Validator<T>;\n    private _error: any;\n\n\n    public get error(): any { return this._error; }\n\n\n    constructor(validator: Validator<T>)\n    {\n        given(validator, \"validator\").ensureHasValue();\n        this._validator = validator;\n    }\n\n\n    public validate(collection: Array<T>): boolean\n    {\n        let errors = new Array<any>();\n        collection.forEach(item =>\n        {\n            this._validator.validate(item);\n            if (this._validator.hasErrors)\n                errors.push(this._validator.errors);\n        });\n\n        if (errors.length > 0)\n        {\n            this._error = errors;\n            return false;\n        }\n\n        return true;\n    }\n}"]}