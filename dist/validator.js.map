{"version":3,"file":"validator.js","sourceRoot":"","sources":["../src/validator.ts"],"names":[],"mappings":"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","sourcesContent":["import given from \"n-defensive\";\nimport \"n-ext\";\nimport PropertyValidator from \"./property-validator\";\nimport ValidationRule from \"./validation-rule\";\nimport { ApplicationException, InvalidOperationException } from \"n-exception\";\nimport ValidationInitializer from \"./validation-initializer\";\nimport ValidationExecutor from \"./validation-executor\";\n\nexport default class Validator<T> implements ValidationInitializer<T>, ValidationExecutor<T>\n{\n    private _propertyValidators = new Array<InternalPropertyValidator<T, any>>();\n    private _hasErrors = false;\n    private _errors = new Object();\n\n    public get isValid(): boolean { return !this._hasErrors; }\n    public get hasErrors(): boolean { return this._hasErrors; }\n    public get errors(): Object { return this._errors; }\n    public get hasRules(): boolean { return this._propertyValidators.length > 0; }\n\n\n    public for<TProperty>(propertyName: string): PropertyValidator<T, TProperty>\n    {\n        given(propertyName, \"propertyName\")\n            .ensureHasValue()\n            .ensure(t => this._propertyValidators.every(u => u.propertyName !== t),\n            \"validation already defined for property '{0}'\".format(propertyName));\n\n        let propertyValidator = new InternalPropertyValidator<T, TProperty>(propertyName);\n        this._propertyValidators.push(propertyValidator);\n        return propertyValidator;\n    }\n\n    public validate(value: T): void \n    {\n        this._hasErrors = false;\n        this._errors = new Object();\n\n        this._propertyValidators.forEach(t =>\n        {\n            t.validate(value);\n            if (t.hasError)\n            {\n                this._hasErrors = true;\n                this._errors[t.propertyName] = t.error;\n            }\n        });\n    }\n}\n\nclass InternalPropertyValidator<T, TProperty> implements PropertyValidator<T, TProperty>\n{\n    private readonly _propertyName: string;\n    private _hasError: boolean;\n    private _error: any;\n    private readonly _validationRules = new Array<InternalPropertyValidationRule<T, TProperty>>();\n    private _lastValidationRule: InternalPropertyValidationRule<T, TProperty>;\n\n\n    public get propertyName(): string { return this._propertyName; }\n    public get hasError(): boolean { return this._hasError; }\n    public get error(): string { return this._error; }\n\n\n    public constructor(propertyName: string)\n    {\n        this._propertyName = propertyName;\n    }\n\n\n    public validate(value: T): void\n    {\n        this._hasError = false;\n        this._error = null;\n\n        let val = <T>value;\n        let propertyVal = (<Object>val).getValue(this._propertyName);\n\n\n        for (let i = 0; i < this._validationRules.length; i++)\n        {\n            let validationRule = this._validationRules[i];\n            let validationResult = true;\n\n            try\n            {\n                validationResult = validationRule.validate(val, propertyVal);\n            } catch (e)\n            {\n                if (e === \"OPTIONAL\")\n                    break;\n            }\n\n            if (!validationResult)\n            {\n                this._hasError = true;\n                this._error = validationRule.error;\n                break;\n            }\n        }\n    }\n\n    public isRequired(): PropertyValidator<T, TProperty>\n    {\n        this._lastValidationRule = new InternalPropertyValidationRule<T, TProperty>();\n        this._lastValidationRule.ensure((propertyValue: TProperty) =>\n        {\n            if (propertyValue != null)\n            {\n                if ((typeof propertyValue) === \"string\")\n                {\n                    return !(<string>(<any>propertyValue)).isEmptyOrWhiteSpace();\n                }\n                return true;\n            }\n            return false;\n        });\n\n        this._lastValidationRule.withMessage(\"Required\");\n        this._validationRules.push(this._lastValidationRule);\n        return this;\n    }\n\n    public isOptional(): PropertyValidator<T, TProperty>\n    {\n        this._lastValidationRule = new InternalPropertyValidationRule<T, TProperty>();\n        this._lastValidationRule.ensure((propertyValue: TProperty) =>\n        {\n            if (propertyValue == null)\n                throw \"OPTIONAL\";\n\n            if ((typeof propertyValue) === \"string\" && (<string>(<any>propertyValue)).isEmptyOrWhiteSpace())\n                throw \"OPTIONAL\";\n\n            return true;\n        });\n\n        this._validationRules.push(this._lastValidationRule);\n        return this;\n    }\n\n    public ensure(propertyValidationPredicate: (propertyValue: TProperty) => boolean): PropertyValidator<T, TProperty>\n    {\n        this._lastValidationRule = new InternalPropertyValidationRule<T, TProperty>();\n        this._lastValidationRule.ensure(propertyValidationPredicate);\n        this._validationRules.push(this._lastValidationRule);\n        return this;\n    }\n\n    public ensureT(valueValidationPredicate: (value: T) => boolean): PropertyValidator<T, TProperty>\n    {\n        this._lastValidationRule = new InternalPropertyValidationRule<T, TProperty>();\n        this._lastValidationRule.ensureT(valueValidationPredicate);\n        this._validationRules.push(this._lastValidationRule);\n        return this;\n    }\n\n    public useValidationRule(validationRule: ValidationRule<TProperty>): PropertyValidator<T, TProperty>\n    {\n        this._lastValidationRule = new InternalPropertyValidationRule<T, TProperty>();\n        this._lastValidationRule.useValidationRule(validationRule);\n        this._validationRules.push(this._lastValidationRule);\n        return this;\n    }\n\n    public useValidator(validator: Validator<TProperty>): PropertyValidator<T, TProperty>\n    {\n        this._lastValidationRule = new InternalPropertyValidationRule<T, TProperty>();\n        this._lastValidationRule.useValidator(validator);\n        this._validationRules.push(this._lastValidationRule);\n        return this;\n    }\n\n    public if(conditionPredicate: (value: T) => boolean): PropertyValidator<T, TProperty>\n    {\n        given(conditionPredicate, \"conditionPredicate\").ensureHasValue();\n        \n        if (this._lastValidationRule == null)\n            throw new ApplicationException(\"No target Validation Rule specified for the condition.\");\n\n        this._lastValidationRule.if(conditionPredicate);\n\n        return this;\n    }\n\n    public withMessage(errorMessage: string): PropertyValidator<T, TProperty>\n    {\n        given(errorMessage, \"errorMessage\").ensureHasValue();\n        \n        if (this._lastValidationRule == null)\n            throw new ApplicationException(\"No target Validation Rule specified for the condition.\");\n\n        this._lastValidationRule.withMessage(errorMessage);\n\n        return this;\n    }\n}\n\nclass InternalPropertyValidationRule<T, TProperty>\n{\n    private _tpropertyValidationPredicate: (propertyValue: TProperty) => boolean;\n    private _tValidationPredicate: (value: T) => boolean;\n    private _validationRule: ValidationRule<TProperty>;\n    private _validator: Validator<TProperty>;\n    private _conditionPredicate: (value: T) => boolean;\n    private _error: string;\n    private _overrideError = false;\n\n\n    public get error(): Object\n    {\n        if (this._validationRule != null && !this._overrideError)\n            return this._validationRule.error;\n        else if (this._validator != null && !this._overrideError)\n            return this._validator.errors;\n        else return this._error;\n    }\n\n\n    public ensure(tpropertyValidationPredicate: (propertyValue: TProperty) => boolean): void\n    {\n        given(tpropertyValidationPredicate, \"tpropertyValidationPredicate\").ensureHasValue();\n\n        this._tpropertyValidationPredicate = tpropertyValidationPredicate;\n        this._error = \"Invalid value\";\n    }\n\n    public ensureT(tValidationPredicate: (value: T) => boolean): void\n    {    \n        given(tValidationPredicate, \"tValidationPredicate\").ensureHasValue();\n        \n        this._tValidationPredicate = tValidationPredicate;\n        this._error = \"Invalid value\";\n    }\n\n    public useValidationRule(validationRule: ValidationRule<TProperty>): void\n    {\n        given(validationRule, \"validationRule\").ensureHasValue();\n\n        this._validationRule = validationRule;\n    }\n\n    public useValidator(validator: Validator<TProperty>): void\n    {\n        given(validator, \"validator\").ensureHasValue();\n        \n        this._validator = validator;\n    }\n\n    public if(conditionPredicate: (value: T) => boolean): void\n    {\n        given(conditionPredicate, \"conditionPredicate\").ensureHasValue();\n        \n        this._conditionPredicate = conditionPredicate;\n    }\n\n    public withMessage(errorMessage: string): void\n    {\n        given(errorMessage, \"errorMessage\").ensureHasValue().ensure(t => !t.isEmptyOrWhiteSpace());\n\n        this._error = errorMessage;\n        this._overrideError = true;\n    }\n\n    public validate(value: T, propertyValue: TProperty): boolean\n    {\n        if (this._conditionPredicate != null && !this._conditionPredicate(value))\n            return true;\n\n        if (this._tpropertyValidationPredicate != null)\n            return this._tpropertyValidationPredicate(propertyValue);\n\n        if (this._tValidationPredicate != null)\n            return this._tValidationPredicate(value);\n\n        if (this._validationRule != null)\n            return this._validationRule.validate(propertyValue);\n\n        if (this._validator != null)\n        {\n            this._validator.validate(propertyValue);\n            return this._validator.isValid;\n        }\n\n        throw new InvalidOperationException(\"Validate\");\n    }\n}"]}